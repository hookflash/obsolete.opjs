/* global suite, test, assert, beforeEach */
define(['opjs/stack/account', 'mocks/Peer'], function (Account, PeerMock) {
  'use strict';
  suite('Account', function () {

    suite('#addPeer', function () {
      beforeEach(function () {
        this.acct = new Account();
      });
      test('Returns reference to new peers', function () {
        var p1 = new PeerMock();
        var added = this.acct.addPeer(p1);

        assert.equal(added, p1);
      });
      test('Returns reference to previously-added peers', function () {
        var p1 = new PeerMock();
        var p2 = new PeerMock();
        var added1, added2;

        p2.$setPeerURI(p1.getPeerURI());

        added1 = this.acct.addPeer(p1);
        added2 = this.acct.addPeer(p2);

        assert.equal(added1, added2);
        assert.notEqual(added2, p2);
        assert.equal(added2.getPeerURI(), p2.getPeerURI());
      });
    });
  });
});
